"use strict";(this.webpackChunkvoice2text=this.webpackChunkvoice2text||[]).push([[267],{411:(e,t,n)=>{n.d(t,{createModel:()=>D});var r=n(108);let s;const o=new Uint8Array(16);function i(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function u(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}function l(e){if(!function(e){return"string"==typeof e&&a.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}function g(e,t,n){function r(e,r,s,o){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=l(r)),16!==(null===(i=r)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),a=n(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=a[e];return s}return u(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function d(e){return 14+(e+64>>>9<<4)+1}function f(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function h(e,t,n,r,s,o){return f((i=f(f(t,e),f(r,o)))<<(a=s)|i>>>32-a,n);var i,a}function p(e,t,n,r,s,o,i){return h(t&n|~t&r,e,t,s,o,i)}function y(e,t,n,r,s,o,i){return h(t&r|n&~r,e,t,s,o,i)}function m(e,t,n,r,s,o,i){return h(t^n^r,e,t,s,o,i)}function w(e,t,n,r,s,o,i){return h(n^(t|~r),e,t,s,o,i)}g("v3",48,(function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let s=0;s<n;s+=8){const n=e[s>>5]>>>s%32&255,o=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[d(t)-1]=t;let n=1732584193,r=-271733879,s=-1732584194,o=271733878;for(let t=0;t<e.length;t+=16){const i=n,a=r,c=s,u=o;n=p(n,r,s,o,e[t],7,-680876936),o=p(o,n,r,s,e[t+1],12,-389564586),s=p(s,o,n,r,e[t+2],17,606105819),r=p(r,s,o,n,e[t+3],22,-1044525330),n=p(n,r,s,o,e[t+4],7,-176418897),o=p(o,n,r,s,e[t+5],12,1200080426),s=p(s,o,n,r,e[t+6],17,-1473231341),r=p(r,s,o,n,e[t+7],22,-45705983),n=p(n,r,s,o,e[t+8],7,1770035416),o=p(o,n,r,s,e[t+9],12,-1958414417),s=p(s,o,n,r,e[t+10],17,-42063),r=p(r,s,o,n,e[t+11],22,-1990404162),n=p(n,r,s,o,e[t+12],7,1804603682),o=p(o,n,r,s,e[t+13],12,-40341101),s=p(s,o,n,r,e[t+14],17,-1502002290),r=p(r,s,o,n,e[t+15],22,1236535329),n=y(n,r,s,o,e[t+1],5,-165796510),o=y(o,n,r,s,e[t+6],9,-1069501632),s=y(s,o,n,r,e[t+11],14,643717713),r=y(r,s,o,n,e[t],20,-373897302),n=y(n,r,s,o,e[t+5],5,-701558691),o=y(o,n,r,s,e[t+10],9,38016083),s=y(s,o,n,r,e[t+15],14,-660478335),r=y(r,s,o,n,e[t+4],20,-405537848),n=y(n,r,s,o,e[t+9],5,568446438),o=y(o,n,r,s,e[t+14],9,-1019803690),s=y(s,o,n,r,e[t+3],14,-187363961),r=y(r,s,o,n,e[t+8],20,1163531501),n=y(n,r,s,o,e[t+13],5,-1444681467),o=y(o,n,r,s,e[t+2],9,-51403784),s=y(s,o,n,r,e[t+7],14,1735328473),r=y(r,s,o,n,e[t+12],20,-1926607734),n=m(n,r,s,o,e[t+5],4,-378558),o=m(o,n,r,s,e[t+8],11,-2022574463),s=m(s,o,n,r,e[t+11],16,1839030562),r=m(r,s,o,n,e[t+14],23,-35309556),n=m(n,r,s,o,e[t+1],4,-1530992060),o=m(o,n,r,s,e[t+4],11,1272893353),s=m(s,o,n,r,e[t+7],16,-155497632),r=m(r,s,o,n,e[t+10],23,-1094730640),n=m(n,r,s,o,e[t+13],4,681279174),o=m(o,n,r,s,e[t],11,-358537222),s=m(s,o,n,r,e[t+3],16,-722521979),r=m(r,s,o,n,e[t+6],23,76029189),n=m(n,r,s,o,e[t+9],4,-640364487),o=m(o,n,r,s,e[t+12],11,-421815835),s=m(s,o,n,r,e[t+15],16,530742520),r=m(r,s,o,n,e[t+2],23,-995338651),n=w(n,r,s,o,e[t],6,-198630844),o=w(o,n,r,s,e[t+7],10,1126891415),s=w(s,o,n,r,e[t+14],15,-1416354905),r=w(r,s,o,n,e[t+5],21,-57434055),n=w(n,r,s,o,e[t+12],6,1700485571),o=w(o,n,r,s,e[t+3],10,-1894986606),s=w(s,o,n,r,e[t+10],15,-1051523),r=w(r,s,o,n,e[t+1],21,-2054922799),n=w(n,r,s,o,e[t+8],6,1873313359),o=w(o,n,r,s,e[t+15],10,-30611744),s=w(s,o,n,r,e[t+6],15,-1560198380),r=w(r,s,o,n,e[t+13],21,1309151649),n=w(n,r,s,o,e[t+4],6,-145523070),o=w(o,n,r,s,e[t+11],10,-1120210379),s=w(s,o,n,r,e[t+2],15,718787259),r=w(r,s,o,n,e[t+9],21,-343485551),n=f(n,i),r=f(r,a),s=f(s,c),o=f(o,u)}return[n,r,s,o]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(d(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));var v,b,R,L={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function M(e,t,n){if(L.randomUUID&&!t&&!e)return L.randomUUID();const r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return u(r)}function U(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function A(e,t){return e<<t|e>>>32-t}g("v5",80,(function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,s=Math.ceil(r/16),o=new Array(s);for(let t=0;t<s;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=n}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=o[e][t];for(let e=16;e<80;++e)r[e]=A(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let s=n[0],i=n[1],a=n[2],c=n[3],u=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),o=A(s,5)+U(n,i,a,c)+u+t[n]+r[e]>>>0;u=c,c=a,a=A(i,30)>>>0,i=s,s=o}n[0]=n[0]+s>>>0,n[1]=n[1]+i>>>0,n[2]=n[2]+a>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+u>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),function(e){e.isTerminateMessage=function(e){return"terminate"===e?.action},e.isLoadMessage=function(e){return"load"===e?.action},e.isSetMessage=function(e){return"set"===e?.action},e.isAudioChunkMessage=function(e){return"audioChunk"===e?.action},e.isRecognizerCreateMessage=function(e){return"create"===e?.action},e.isRecognizerRetrieveFinalResultMessage=function(e){return"retrieveFinalResult"===e?.action},e.isRecognizerRemoveMessage=function(e){return"remove"===e?.action}}(v||(v={})),function(e){e.isLoadResult=function(e){return"load"===e?.event}}(b||(b={})),function(e){e.isRecognizerMessage=function(e){return["result","partialresult"].includes(e.event)||Reflect.has(e,"recognizerId")},e.isResult=function(e){return null!=e?.result?.text||null!=e?.result?.result},e.isPartialResult=function(e){return null!=e?.result?.partial}}(R||(R={}));class z{constructor(e=0){this.logLevel=0,this.setLogLevel(e)}getLogLevel(){return this.logLevel}setLogLevel(e){"number"==typeof e&&(this.logLevel=e)}error(e){}warn(e){}info(e){}verbose(e){}debug(e){}}let I,_=null;function k(){return null!==_&&0!==_.byteLength||(_=new Float32Array(I.memory.buffer)),_}let C=0;let E=null;function W(){return null!==E&&0!==E.byteLength||(E=new Int32Array(I.memory.buffer)),E}function x(e){try{const i=I.__wbindgen_add_to_stack_pointer(-16),a=function(e,t){const n=t(4*e.length,4)>>>0;return k().set(e,n/4),C=e.length,n}(e,I.__wbindgen_malloc),c=C;I.change_range(i,a,c);var t=W()[i/4+0],n=W()[i/4+1],r=(s=t,o=n,s>>>=0,k().subarray(s/4,s/4+o)).slice();return I.__wbindgen_free(t,4*n,4),r}finally{I.__wbindgen_add_to_stack_pointer(16)}var s,o}async function F(e){if(void 0!==I)return I;void 0===e&&(e=new URL(n(532),n.b));const t=function(){const e={wbg:{}};return e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:s,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;r.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return function(e,t){return I=e.exports,F.__wbindgen_wasm_module=t,_=null,E=null,I}(s,o)}F();class S extends EventTarget{constructor(e,t=0){super(),this.modelUrl=e,this._ready=!1,this.logger=new z,this.recognizers=new Map,this.logger.setLogLevel(t),window.Worker&&fetch(new URL(n(593),n.b).toString(),{mode:"cors"}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);this.worker=new Worker(t,{name:new URL(n(846),n.b).toString()}),URL.revokeObjectURL(t),this.initialize()})).catch((e=>{r.error(e)}))}initialize(){this.worker.addEventListener("message",(e=>this.handleMessage(e))),this.postMessage({action:"set",key:"logLevel",value:this.logger.getLogLevel()}),this.postMessage({action:"load",modelUrl:this.modelUrl})}postMessage(e,t){this.worker.postMessage(e,t)}handleMessage(e){const t=e.data;if(t){b.isLoadResult(t)&&(this._ready=t.result);const e=new CustomEvent(t.event,{detail:t});if(R.isRecognizerMessage(t)&&t.recognizerId){const n=this.recognizers.get(t.recognizerId);if(n)return void n.dispatchEvent(e)}this.dispatchEvent(e)}}on(e,t){this.addEventListener(e,(e=>{e.detail&&!R.isRecognizerMessage(e.detail)&&t(e.detail)}))}registerPort(e){this.logger.debug(`Registering port ${e}`),this.messagePort=e,this.messagePort.onmessage=this.forwardMessage.bind(this)}forwardMessage(e){const t=e.data;v.isAudioChunkMessage(t)&&this.postMessage(t,{transfer:[t.data.buffer]})}get ready(){return this._ready}terminate(){this.postMessage({action:"terminate"}),this._ready=!1}setLogLevel(e){this.logger.setLogLevel(e),this.postMessage({action:"set",key:"logLevel",value:e})}registerRecognizer(e){this.recognizers.set(e.id,e)}unregisterRecognizer(e){this.recognizers.delete(e)}get KaldiRecognizer(){const e=this;return class extends EventTarget{constructor(t,n){if(super(),this.id=M(),!e.ready)throw new Error("Cannot create KaldiRecognizer. Model is either not ready or has been terminated");e.registerRecognizer(this),e.postMessage({action:"create",recognizerId:this.id,sampleRate:t,grammar:n})}on(e,t){this.addEventListener(e,(e=>{t(e?.detail)}))}setWords(t){e.postMessage({action:"set",recognizerId:this.id,key:"words",value:t})}acceptWaveform(e){if(e.numberOfChannels<1)throw new Error("AudioBuffer should contain at least one channel");this.acceptWaveformFloat(e.getChannelData(0),e.sampleRate)}acceptWaveformFloat(t,n){const r=x(t);if(!(r instanceof Float32Array))throw new Error(`Channel data is not a Float32Array as expected: ${r}`);e.logger.debug(`Recognizer (id: ${this.id}): Sending audioChunk 0=${r[0]} ${r.length}=${r[r.length-1]}`),e.postMessage({action:"audioChunk",data:r,recognizerId:this.id,sampleRate:n},{transfer:[r.buffer]})}retrieveFinalResult(){e.postMessage({action:"retrieveFinalResult",recognizerId:this.id})}remove(){e.unregisterRecognizer(this.id),e.postMessage({action:"remove",recognizerId:this.id})}}}}async function D(e,t=0){const n=new S(e,t);return new Promise(((e,t)=>n.on("load",(r=>{r.result&&e(n),t()}))))}},593:(e,t,n)=>{e.exports=n.p+"vosk-worker.js"},532:(e,t,n)=>{e.exports=n.p+"vosk-helper.wasm"},846:(e,t,n)=>{e.exports=n.p+"vosk.wasm"}}]);